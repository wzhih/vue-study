# Vue Router 知识回顾

## Vue Router 路由是什么

`Vue Router`是`Vue`官方的路由管理器。和`vue`核心深度集成，为应用提供`url`映射`组件`的路由管理功能

* 模块化的、基于组件的路由配置
* 可嵌套的路由/视图表
* 路由参数、重新、通配符
* 基于`vue`过滤系统的视图过渡效果
* 细粒度的导航控制
* 带有自动激活的`Css class`的链接
* `H5`历史模式和`hash`模式，低版本浏览器自动降级
* 自定义滚动条行为

主要功能是管理路由的，其他功能是附加的


## 与后端路由对比

* 后端路由是管理请求`url`映射对应需要运行的代码，前端路由是管理`url`映射渲染对应组件

* 大多数后端框架都有专门的路由配置文件，`Vue Roouter`也一样有着专门的路由配置文件

* 后端路由基本上都是由`域名`+`uri`构成，前端路由不止是这样，还多加了入口`<router-link>`、出口`<router-view>`
因为不可能用户想要跳转其他页面的时候，自己去修改`uri`(用户还得知道所有`uri`)，既不合理，也不方便
后台系统一般是循环渲染出`<router-link>`菜单模块，然后在页面主模块使用`<router-view>`渲染`uri`对应的组件


## 基础

#### 动态路由匹配

**为什么需要动态路由匹配**

后端路由经常有这样子的需求：同一个`uri`+不同路由参数，运行同一份代码，输入参数不一样而已。
最简单的方法就是`GET`，比较好的方法是`pathinfo`(代码自己从请求`url`中解析出路由参数)

前端也是如此，同一个`uri`+不同路由参数，映射到同一个组件，组件内部监听路由参数(相当于函数输入不同参数)，输出不同数据
所以需要有动态路由匹配

**例子：**

```js
const User = {
  template: '<div>User：{{ $route.params.id }}</div>'
}

const router = new VueRouter({
  routes: [
    // 动态路径参数 以冒号开头
    { path: '/user/:id', component: User }
  ]
})
```

* `/user/1`和`/user/2`都会匹配到`User`组件，而在组件内部，可以使用`this.$route.params.id`访问`uri`中的`id`

* `uri`中可以有多个这样的路径参数，组件可在`this.$route.paramsd`对象中获取对应值

* 由于使用的是同一个组件，组件可能会被复用，所以生命周期钩子函数可能不会被复用
所以，如果要复用组件，那么需要通过侦听属性`watch`或路由导航守卫，调用方法对路由变化作出响应

* 高级用法就是通过正则表达式去匹配路由了

* 路由优先级是：先定义的先匹配


#### 嵌套(视图)路由

实际上的页面应用，经常是通过组件嵌套组合成的，同样的`url`中的各段动态参数也可以映射嵌套的各层组件

通过父组件添加`<router-view>`，`Vue Router`参数中使用`children`配置参数来嵌套子组件










